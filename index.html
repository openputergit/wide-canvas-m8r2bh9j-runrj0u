<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastCrypto Pay</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* Skeuomorphic design elements */
        :root {
            --primary: #ff8a00;
            --secondary: #ff5e62;
            --accent: #00d2ff;
            --background: #1c1f2e;
            --card: #2a2e43;
            --text: #ffffff;
            --border: #3d4259;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background-color: var(--background);
            color: var(--text);
            background-image: linear-gradient(to bottom right, rgba(255, 138, 0, 0.05), rgba(0, 210, 255, 0.05));
        }

        .neubrutal-card {
            background-color: var(--card);
            border: 3px solid var(--border);
            box-shadow: 8px 8px 0 rgba(255, 94, 98, 0.3);
            transition: all 0.3s ease;
            transform-origin: center;
        }

        .neubrutal-card:hover {
            transform: translateY(-5px);
            box-shadow: 10px 10px 0 rgba(255, 94, 98, 0.4);
        }

        .neubrutal-button {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border: 3px solid #3d3d3d;
            box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.3);
            transition: all 0.2s ease;
            transform-origin: center;
            font-weight: 700;
        }

        .neubrutal-button:hover {
            transform: translateY(-2px);
            box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.4);
            filter: brightness(110%);
        }

        .neubrutal-button:active {
            transform: translateY(2px);
            box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.2);
        }

        .neubrutal-input {
            background-color: var(--card);
            border: 2px solid var(--border);
            box-shadow: inset 2px 2px 0 rgba(0, 0, 0, 0.2);
            color: var(--text);
        }

        .neubrutal-select {
            background-color: var(--card);
            border: 2px solid var(--border);
            box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2);
            color: var(--text);
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
        }

        .wallet-card {
            background: linear-gradient(135deg, #313755 0%, #232639 100%);
            border: 3px solid var(--border);
            box-shadow: 6px 6px 0 rgba(0, 210, 255, 0.2);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #374151;
            transition: .4s;
            border-radius: 30px;
            border: 2px solid var(--border);
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .progress-bar {
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--accent) 0%, var(--primary) 100%);
            position: relative;
            overflow: hidden;
        }

        .loader {
            border: 5px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            border-top: 5px solid var(--accent);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #qrCode canvas {
            border: 8px solid white;
            border-radius: 10px;
        }

        .crypto-price-card {
            background: linear-gradient(135deg, #2e3554 0%, #1f2235 100%);
            border: 2px solid #3d4259;
            box-shadow: 4px 4px 0 rgba(0, 210, 255, 0.2);
        }

        .invoice-preview {
            background-color: white;
            color: #1a202c;
            padding: 2rem;
            border-radius: 0.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        /* Tab styling */
        .tab-button {
            position: relative;
            cursor: pointer;
            padding: 1rem 1.5rem;
            font-weight: bold;
            color: var(--text);
            opacity: 0.6;
            transition: opacity 0.3s ease;
        }

        .tab-button.active {
            opacity: 1;
            border-bottom: 3px solid var(--primary);
        }

        /* Modal styling */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--card);
            border: 3px solid var(--border);
            box-shadow: 10px 10px 0 rgba(255, 94, 98, 0.3);
            max-width: 90%;
            width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalIn 0.5s ease;
        }

        @keyframes modalIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Loading animation for currency conversion */
        .converting-animation {
            position: relative;
            padding-left: 30px;
        }

        .converting-animation:before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: var(--accent);
            animation: spin 1s infinite linear;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--card);
        }

        ::-webkit-scrollbar-thumb {
            background-color: var(--border);
            border-radius: 6px;
            border: 3px solid var(--card);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .neubrutal-card {
                box-shadow: 5px 5px 0 rgba(255, 94, 98, 0.3);
            }
            
            .modal-content {
                width: 95%;
                box-shadow: 6px 6px 0 rgba(255, 94, 98, 0.3);
            }
        }

        /* Glowing effects */
        .glow-button {
            box-shadow: 0 0 15px rgba(255, 138, 0, 0.5);
            transition: all 0.3s ease;
        }
        
        .glow-button:hover {
            box-shadow: 0 0 25px rgba(255, 138, 0, 0.8);
        }
        
        .pulse {
            animation: pulse-animation 2s infinite;
        }
        
        @keyframes pulse-animation {
            0% {
                box-shadow: 0 0 0 0 rgba(0, 210, 255, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(0, 210, 255, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(0, 210, 255, 0);
            }
        }

        .crypto-bg {
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBmaWxsPSJyZ2JhKDI1NSwgMTM4LCAwLCAwLjEpIiBkPSJNNTAgOTJjLTIzLjIgMC00Mi0xOC44LTQyLTQyczE4LjgtNDIgNDItNDIgNDIgMTguOCA0MiA0Mi0xOC44IDQyLTQyIDQyek01MCAyNWMtMTMuOCAwLTI1IDExLjItMjUgMjVzMTEuMiAyNSAyNSAyNSAyNS0xMS4yIDI1LTI1LTExLjItMjUtMjUtMjV6Ii8+PC9zdmc+');
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
        }

        .animated-gradient-border {
            position: relative;
            border-radius: 0.5rem;
            overflow: hidden;
        }

        .animated-gradient-border::before {
            content: "";
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            z-index: -1;
            background: linear-gradient(45deg, var(--primary), var(--accent), var(--secondary), var(--primary));
            background-size: 400% 400%;
            animation: gradient 6s ease infinite;
            border-radius: 0.6rem;
        }

        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <div id="app" class="container mx-auto px-4 py-8">
        <!-- Header with crypto prices -->
        <header class="mb-8">
            <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-6">
                <div>
                    <h1 class="text-3xl md:text-4xl font-bold mb-2">FastCrypto Pay</h1>
                    <p class="text-gray-400">Non-custodial invoicing & payment platform</p>
                </div>
                <div class="flex items-center space-x-4 mt-4 md:mt-0">
                    <div class="crypto-price-card p-3 rounded-lg flex items-center animated-gradient-border pulse">
                        <img src="https://cryptologos.cc/logos/bitcoin-btc-logo.png" alt="BTC" class="w-6 h-6 mr-2">
                        <div>
                            <p class="text-xs text-gray-400">BTC</p>
                            <p class="text-sm font-bold crypto-price" id="btcPrice">Loading...</p>
                        </div>
                    </div>
                    <div class="crypto-price-card p-3 rounded-lg flex items-center animated-gradient-border pulse">
                        <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" alt="ETH" class="w-6 h-6 mr-2">
                        <div>
                            <p class="text-xs text-gray-400">ETH</p>
                            <p class="text-sm font-bold crypto-price" id="ethPrice">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main content tabs -->
        <div class="mb-6 border-b border-gray-700">
            <div class="flex overflow-x-auto">
                <div class="tab-button active" data-tab="dashboard">Dashboard</div>
                <div class="tab-button" data-tab="create-invoice">Create Invoice</div>
                <div class="tab-button" data-tab="quick-pay">Quick Pay</div>
                <div class="tab-button" data-tab="transactions">Transactions</div>
                <div class="tab-button" data-tab="settings">Settings</div>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard-tab" class="tab-content active">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <!-- Wallet balance -->
                <div class="neubrutal-card rounded-xl p-6">
                    <div class="flex justify-between items-start mb-6">
                        <h3 class="text-xl font-bold">Total Balance</h3>
                        <button class="neubrutal-button px-3 py-1 rounded-lg text-sm glow-button" id="refreshBalance">
                            <i class="bi bi-arrow-clockwise mr-1"></i> Refresh
                        </button>
                    </div>
                    
                    <div class="wallet-card rounded-xl p-4 mb-4">
                        <div class="flex justify-between items-center mb-2">
                            <p class="text-gray-400">USD Value</p>
                            <p class="text-lg font-bold">$12,345.67</p>
                        </div>
                        <div class="flex justify-between items-center">
                            <p class="text-gray-400">Crypto Value</p>
                            <div>
                                <p class="text-sm font-medium">0.25 BTC</p>
                                <p class="text-sm font-medium">2.75 ETH</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-semibold">Connected Wallets</h4>
                            <button class="text-blue-500 text-sm font-medium" id="addWalletBtn">+ Add Wallet</button>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-gray-800 rounded-lg">
                                <div class="flex items-center">
                                    <div class="bg-blue-600 p-2 rounded-lg mr-3">
                                        <i class="bi bi-wallet2"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium">MetaMask</p>
                                        <p class="text-xs text-gray-400">ETH: 0x36d8...0Ef5</p>
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gray-800 rounded-lg">
                                <div class="flex items-center">
                                    <div class="bg-yellow-600 p-2 rounded-lg mr-3">
                                        <i class="bi bi-currency-bitcoin"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium">Bitcoin Wallet</p>
                                        <p class="text-xs text-gray-400">BTC: bc1qxy...zqv9</p>
                                    </div>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Activity summary -->
                <div class="neubrutal-card rounded-xl p-6">
                    <div class="flex justify-between items-start mb-6">
                        <h3 class="text-xl font-bold">Activity Summary</h3>
                        <div class="flex items-center space-x-2">
                            <select class="neubrutal-select text-sm p-1 pr-8 rounded-lg">
                                <option>Last 7 days</option>
                                <option>Last 30 days</option>
                                <option>Last 90 days</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="h-48 mb-4">
                        <canvas id="activityChart"></canvas>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-800 rounded-lg p-4">
                            <p class="text-gray-400 text-sm mb-1">Total Transactions</p>
                            <p class="text-xl font-bold">36</p>
                        </div>
                        <div class="bg-gray-800 rounded-lg p-4">
                            <p class="text-gray-400 text-sm mb-1">Total Volume</p>
                            <p class="text-xl font-bold">$4,876.23</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Recent invoices -->
            <div class="neubrutal-card rounded-xl p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold">Recent Invoices</h3>
                    <button class="neubrutal-button px-4 py-2 rounded-lg text-sm glow-button" id="viewAllInvoices">
                        View All
                    </button>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full text-left">
                        <thead>
                            <tr>
                                <th class="pb-4 text-gray-400">#</th>
                                <th class="pb-4 text-gray-400">Date</th>
                                <th class="pb-4 text-gray-400">Amount</th>
                                <th class="pb-4 text-gray-400">Currency</th>
                                <th class="pb-4 text-gray-400">Status</th>
                                <th class="pb-4 text-gray-400">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-t border-gray-700">
                                <td class="py-4">INV-1234</td>
                                <td class="py-4">May 15, 2023, 14:32 UTC</td>
                                <td class="py-4 font-semibold">$350.00</td>
                                <td class="py-4">
                                    <div class="flex items-center">
                                        <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" alt="ETH" class="w-4 h-4 mr-2">
                                        <span>ETH</span>
                                    </div>
                                </td>
                                <td class="py-4">
                                    <span class="bg-green-900 text-green-300 px-2 py-1 rounded-lg text-xs font-semibold">Paid</span>
                                </td>
                                <td class="py-4">
                                    <div class="flex space-x-2">
                                        <button class="view-invoice-details bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded" data-invoice="INV-1234">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="download-invoice bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded" data-invoice="INV-1234">
                                            <i class="bi bi-file-earmark-arrow-down"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr class="border-t border-gray-700">
                                <td class="py-4">INV-1235</td>
                                <td class="py-4">May 14, 2023, 09:15 UTC</td>
                                <td class="py-4 font-semibold">$125.50</td>
                                <td class="py-4">
                                    <div class="flex items-center">
                                        <img src="https://cryptologos.cc/logos/bitcoin-btc-logo.png" alt="BTC" class="w-4 h-4 mr-2">
                                        <span>BTC</span>
                                    </div>
                                </td>
                                <td class="py-4">
                                    <span class="bg-yellow-900 text-yellow-300 px-2 py-1 rounded-lg text-xs font-semibold">Pending</span>
                                </td>
                                <td class="py-4">
                                    <div class="flex space-x-2">
                                        <button class="view-invoice-details bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded" data-invoice="INV-1235">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="download-invoice bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded" data-invoice="INV-1235">
                                            <i class="bi bi-file-earmark-arrow-down"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr class="border-t border-gray-700">
                                <td class="py-4">INV-1236</td>
                                <td class="py-4">May 12, 2023, 18:05 UTC</td>
                                <td class="py-4 font-semibold">$750.00</td>
                                <td class="py-4">
                                    <div class="flex items-center">
                                        <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" alt="ETH" class="w-4 h-4 mr-2">
                                        <span>ETH</span>
                                    </div>
                                </td>
                                <td class="py-4">
                                    <span class="bg-red-900 text-red-300 px-2 py-1 rounded-lg text-xs font-semibold">Cancelled</span>
                                </td>
                                <td class="py-4">
                                    <div class="flex space-x-2">
                                        <button class="view-invoice-details bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded" data-invoice="INV-1236">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="download-invoice bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded" data-invoice="INV-1236">
                                            <i class="bi bi-file-earmark-arrow-down"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Create Invoice Tab -->
        <div id="create-invoice-tab" class="tab-content hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="neubrutal-card rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-6">Create New Invoice</h3>
                    
                    <form id="invoiceForm" class="space-y-6">
                        <div class="space-y-4">
                            <div>
                                <label for="invoiceAmount" class="block text-sm font-medium mb-1">Amount</label>
                                <div class="flex">
                                    <input type="number" id="invoiceAmount" class="neubrutal-input rounded-l-lg px-4 py-3 w-full" placeholder="0.00" required>
                                    <select id="invoiceCurrency" class="neubrutal-select rounded-r-lg px-4 py-3 w-1/3 border-l-0">
                                        <option value="USD">USD</option>
                                        <option value="EUR">EUR</option>
                                        <option value="GBP">GBP</option>
                                        <option value="BTC">BTC</option>
                                        <option value="ETH">ETH</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label for="invoiceDescription" class="block text-sm font-medium mb-1">Description</label>
                                <textarea id="invoiceDescription" class="neubrutal-input rounded-lg px-4 py-3 w-full" rows="2" placeholder="What's this invoice for?"></textarea>
                            </div>
                            
                            <div>
                                <label for="paymentMethod" class="block text-sm font-medium mb-1">Receive Payment In</label>
                                <select id="paymentMethod" class="neubrutal-select rounded-lg px-4 py-3 w-full">
                                    <option value="BTC">Bitcoin (BTC)</option>
                                    <option value="ETH">Ethereum (ETH)</option>
                                    <option value="USDT">Tether (USDT)</option>
                                    <option value="SOL">Solana (SOL)</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="buyerInfo" class="block text-sm font-medium mb-1">Buyer Information (optional)</label>
                                <input type="text" id="buyerInfo" class="neubrutal-input rounded-lg px-4 py-3 w-full" placeholder="Email or name">
                            </div>
                            
                            <div>
                                <label for="dueDate" class="block text-sm font-medium mb-1">Due Date (optional)</label>
                                <input type="date" id="dueDate" class="neubrutal-input rounded-lg px-4 py-3 w-full">
                            </div>
                        </div>
                        
                        <div class="bg-gray-800 rounded-lg p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-gray-300">Subtotal</span>
                                <span id="subtotalAmount">$0.00</span>
                            </div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-gray-300">Fee (varies by amount)</span>
                                <span id="feeAmount">$0.00</span>
                            </div>
                            <div class="flex justify-between items-center font-bold">
                                <span>Total</span>
                                <span id="totalAmount">$0.00</span>
                            </div>
                            <div class="mt-2 text-xs text-gray-400">
                                Fee rates: 5% (<$100), 3% ($100-$1000), 2% (>$1000)
                            </div>
                        </div>
                        
                        <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                            <button type="button" id="previewInvoice" class="neubrutal-button bg-gray-700 hover:bg-gray-600 text-white py-3 px-6 rounded-lg flex-1">Preview Invoice</button>
                            <button type="submit" id="generateInvoice" class="neubrutal-button bg-gradient-to-r from-purple-600 to-blue-500 hover:from-purple-500 hover:to-blue-400 text-white py-3 px-6 rounded-lg flex-1 glow-button">Generate Invoice</button>
                        </div>
                    </form>
                </div>
                
                <!-- Invoice Preview -->
                <div class="neubrutal-card rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-6">Invoice Preview</h3>
                    
                    <div id="invoicePreview" class="invoice-preview rounded-lg w-full">
                        <div class="text-center mb-6">
                            <h2 class="text-2xl font-bold text-gray-900">INVOICE</h2>
                            <p id="previewInvoiceNumber" class="text-gray-600">INV-1237</p>
                            <p id="previewTimestamp" class="text-gray-500 text-sm mt-1">Generated: May 16, 2023, 15:45 UTC</p>
                        </div>
                        
                        <div class="flex justify-between mb-6">
                            <div>
                                <p class="text-sm text-gray-600">From</p>
                                <p class="font-bold text-gray-900">Your Name / Business</p>
                                <p class="text-sm text-gray-600">0x36d8...0Ef5</p>
                            </div>
                            <div class="text-right">
                                <p class="text-sm text-gray-600">To</p>
                                <p id="previewBuyerInfo" class="font-bold text-gray-900">Client Name</p>
                                <p id="previewDate" class="text-sm text-gray-600">May 16, 2023</p>
                                <p id="previewDueDate" class="text-sm text-gray-600">Due: May 30, 2023</p>
                            </div>
                        </div>
                        
                        <table class="w-full mb-6">
                            <thead>
                                <tr class="border-b border-gray-300">
                                    <th class="text-left py-2 text-gray-900">Description</th>
                                    <th class="text-right py-2 text-gray-900">Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td id="previewDescription" class="py-3 text-gray-700">Service description will appear here</td>
                                    <td id="previewAmount" class="py-3 text-right font-semibold text-gray-900">$0.00</td>
                                </tr>
                                <tr class="border-t border-gray-200">
                                    <td class="py-2 text-right text-gray-600">Fee (<span id="previewFeePercentage">3</span>%)</td>
                                    <td id="previewFee" class="py-2 text-right text-gray-600">$0.00</td>
                                </tr>
                                <tr class="border-t border-gray-300">
                                    <td class="py-2 text-right font-semibold text-gray-900">Total</td>
                                    <td id="previewTotal" class="py-2 text-right font-bold text-gray-900">$0.00</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div class="flex flex-col md:flex-row justify-between items-center">
                            <div>
                                <p class="text-sm text-gray-600 mb-1">Receive payment in</p>
                                <p id="previewPaymentMethod" class="font-medium text-gray-900">Bitcoin (BTC)</p>
                                <p id="previewEquivalent" class="text-sm text-gray-600">≈ 0.00000 BTC</p>
                            </div>
                            <div id="previewQrCode" class="mt-4 md:mt-0">
                                <!-- QR code will be generated here -->
                                <div class="bg-gray-200 w-24 h-24 rounded-lg flex items-center justify-center">
                                    <span class="text-xs text-gray-700">QR Preview</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4 pt-4 border-t border-gray-300 text-center">
                            <p class="text-sm text-gray-600 mb-2">Payment Options</p>
                            <div class="flex justify-center space-x-2">
                                <button class="bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg text-sm">
                                    <i class="bi bi-credit-card mr-1"></i> Pay Now
                                </button>
                                <button class="bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg text-sm">
                                    <i class="bi bi-wallet2 mr-1"></i> Pay with Wallet
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 flex justify-center">
                        <button id="downloadInvoicePdf" class="neubrutal-button bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white py-2 px-4 rounded-lg flex items-center glow-button">
                            <i class="bi bi-file-earmark-pdf mr-2"></i> Download PDF
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Pay Tab -->
        <div id="quick-pay-tab" class="tab-content hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="neubrutal-card rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-6">Quick Pay</h3>
                    
                    <form id="quickPayForm" class="space-y-6">
                        <div class="space-y-4">
                            <div>
                                <label for="quickPayAmount" class="block text-sm font-medium mb-1">Amount to Send</label>
                                <div class="flex">
                                    <input type="number" id="quickPayAmount" class="neubrutal-input rounded-l-lg px-4 py-3 w-full" placeholder="0.00" required>
                                    <select id="quickPayCurrency" class="neubrutal-select rounded-r-lg px-4 py-3 w-1/3 border-l-0">
                                        <option value="USD">USD</option>
                                        <option value="BTC">BTC</option>
                                        <option value="ETH">ETH</option>
                                        <option value="USDT">USDT</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div>
                                <label for="recipientAddress" class="block text-sm font-medium mb-1">Recipient Address</label>
                                <input type="text" id="recipientAddress" class="neubrutal-input rounded-lg px-4 py-3 w-full" placeholder="Enter wallet address or scan QR">
                                <div class="flex justify-end mt-1">
                                    <button type="button" id="scanQrBtn" class="text-blue-400 text-sm flex items-center">
                                        <i class="bi bi-qr-code-scan mr-1"></i> Scan QR
                                    </button>
                                </div>
                            </div>
                            
                            <div>
                                <label for="senderWallet" class="block text-sm font-medium mb-1">Pay From</label>
                                <select id="senderWallet" class="neubrutal-select rounded-lg px-4 py-3 w-full">
                                    <option value="metamask">MetaMask - ETH: 0x36d8...0Ef5</option>
                                    <option value="bitcoin">Bitcoin Wallet - BTC: bc1qxy...zqv9</option>
                                </select>
                            </div>
                            
                            <div>
                                <label for="quickPayNote" class="block text-sm font-medium mb-1">Note (optional)</label>
                                <input type="text" id="quickPayNote" class="neubrutal-input rounded-lg px-4 py-3 w-full" placeholder="Add a note to this payment">
                            </div>
                        </div>
                        
                        <div class="bg-gray-800 rounded-lg p-4">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-gray-300">Amount</span>
                                <span id="qpAmount">$0.00</span>
                            </div>
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-gray-300">Network Fee</span>
                                <span id="qpNetworkFee">$0.00</span>
                            </div>
                            <div class="flex justify-between items-center font-bold">
                                <span>Total</span>
                                <span id="qpTotal">$0.00</span>
                            </div>
                        </div>
                        
                        <button type="submit" id="sendPayment" class="neubrutal-button w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-400 hover:to-blue-400 text-white py-3 px-6 rounded-lg glow-button">
                            Send Quick Payment
                        </button>
                    </form>
                </div>
                
                <!-- Conversion Rate and QR code -->
                <div class="neubrutal-card rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-6">Payment Details</h3>
                    
                    <div class="mb-6">
                        <p class="text-gray-400 mb-2">Current Conversion Rate</p>
                        <div class="bg-gray-800 rounded-lg p-4">
                            <div id="conversionRates" class="flex flex-col space-y-2">
                                <div class="flex justify-between items-center">
                                    <span>1 BTC</span>
                                    <div id="btcConversionRate" class="converting-animation">Fetching rates...</div>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span>1 ETH</span>
                                    <div id="ethConversionRate" class="converting-animation">Fetching rates...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <p class="text-gray-400 mb-2">QR Code for Quick Payment</p>
                        <div class="flex flex-col items-center justify-center bg-gray-800 rounded-lg p-6">
                            <div id="quickPayQrCode" class="mb-4 flex items-center justify-center">
                                <p class="text-gray-500 text-sm">Enter amount and recipient to generate QR code</p>
                            </div>
                            <p id="quickPayQrDetails" class="text-center text-sm text-gray-400 hidden">
                                Scan this QR code to send <span id="qrAmount">0.00</span> 
                                <span id="qrCurrency">USD</span> to 
                                <span id="qrAddress">address</span>
                            </p>
                        </div>
                    </div>
                    
                    <div class="mt-6">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-medium text-gray-300">Transaction Speed</h4>
                            <span class="text-sm text-green-400">30 sec - 1 min</span>
                        </div>
                        <div class="h-2 bg-gray-700 rounded-full">
                            <div class="progress-bar h-full w-3/4 rounded-full"></div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">
                            Your payment will be processed with priority confirmation.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Transactions Tab -->
        <div id="transactions-tab" class="tab-content hidden">
            <div class="neubrutal-card rounded-xl p-6">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold">Transaction History</h3>
                    <div class="flex space-x-3">
                        <select id="transactionFilter" class="neubrutal-select text-sm p-2 pr-8 rounded-lg">
                            <option value="all">All Transactions</option>
                            <option value="received">Received</option>
                            <option value="sent">Sent</option>
                        </select>
                        <button class="neubrutal-button px-4 py-2 rounded-lg text-sm glow-button">
                            <i class="bi bi-download mr-1"></i> Export
                        </button>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full text-left">
                        <thead>
                            <tr>
                                <th class="pb-4 text-gray-400">Date</th>
                                <th class="pb-4 text-gray-400">Type</th>
                                <th class="pb-4 text-gray-400">From/To</th>
                                <th class="pb-4 text-gray-400">Amount</th>
                                <th class="pb-4 text-gray-400">Fee</th>
                                <th class="pb-4 text-gray-400">Status</th>
                                <th class="pb-4 text-gray-400">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-t border-gray-700">
                                <td class="py-4">May 15, 2023, 14:32 UTC</td>
                                <td class="py-4">
                                    <span class="bg-blue-900 text-blue-300 px-2 py-1 rounded-lg text-xs font-semibold">Received</span>
                                </td>
                                <td class="py-4 text-sm">
                                    0xa1b2...c3d4
                                </td>
                                <td class="py-4 font-semibold">+0.15 ETH</td>
                                <td class="py-4 text-sm text-gray-400">0.002 ETH</td>
                                <td class="py-4">
                                    <span class="bg-green-900 text-green-300 px-2 py-1 rounded-lg text-xs font-semibold">Completed</span>
                                </td>
                                <td class="py-4">
                                    <div class="flex space-x-2">
                                        <button class="view-transaction bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded" data-tx="0x123">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="download-receipt bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded" data-tx="0x123">
                                            <i class="bi bi-file-earmark-arrow-down"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr class="border-t border-gray-700">
                                <td class="py-4">May 14, 2023, 09:15 UTC</td>
                                <td class="py-4">
                                    <span class="bg-orange-900 text-orange-300 px-2 py-1 rounded-lg text-xs font-semibold">Sent</span>
                                </td>
                                <td class="py-4 text-sm">
                                    0xe5f6...g7h8
                                </td>
                                <td class="py-4 font-semibold">-0.005 BTC</td>
                                <td class="py-4 text-sm text-gray-400">0.0001 BTC</td>
                                <td class="py-4">
                                    <span class="bg-green-900 text-green-300 px-2 py-1 rounded-lg text-xs font-semibold">Completed</span>
                                </td>
                                <td class="py-4">
                                    <div class="flex space-x-2">
                                        <button class="view-transaction bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded" data-tx="0x456">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="download-receipt bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded" data-tx="0x456">
                                            <i class="bi bi-file-earmark-arrow-down"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr class="border-t border-gray-700">
                                <td class="py-4">May 12, 2023, 18:05 UTC</td>
                                <td class="py-4">
                                    <span class="bg-blue-900 text-blue-300 px-2 py-1 rounded-lg text-xs font-semibold">Received</span>
                                </td>
                                <td class="py-4 text-sm">
                                    0xi9j0...k1l2
                                </td>
                                <td class="py-4 font-semibold">+100 USDT</td>
                                <td class="py-4 text-sm text-gray-400">2 USDT</td>
                                <td class="py-4">
                                    <span class="bg-green-900 text-green-300 px-2 py-1 rounded-lg text-xs font-semibold">Completed</span>
                                </td>
                                <td class="py-4">
                                    <div class="flex space-x-2">
                                        <button class="view-transaction bg-blue-600 hover:bg-blue-700 px-2 py-1 rounded" data-tx="0x789">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="download-receipt bg-purple-600 hover:bg-purple-700 px-2 py-1 rounded" data-tx="0x789">
                                            <i class="bi bi-file-earmark-arrow-down"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <div class="neubrutal-card rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-6">Account Settings</h3>
                    
                    <div class="space-y-6">
                        <div>
                            <h4 class="font-medium mb-3">Profile Information</h4>
                            <div class="space-y-3">
                                <div>
                                    <label for="displayName" class="block text-sm font-medium mb-1">Display Name</label>
                                    <input type="text" id="displayName" class="neubrutal-input rounded-lg px-4 py-3 w-full" value="John Doe">
                                </div>
                                <div>
                                    <label for="emailAddress" class="block text-sm font-medium mb-1">Email Address</label>
                                    <input type="email" id="emailAddress" class="neubrutal-input rounded-lg px-4 py-3 w-full" value="john.doe@example.com">
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium mb-3">Invoice Defaults</h4>
                            <div class="space-y-3">
                                <div>
                                    <label for="defaultCurrency" class="block text-sm font-medium mb-1">Default Currency</label>
                                    <select id="defaultCurrency" class="neubrutal-select rounded-lg px-4 py-3 w-full">
                                        <option value="USD">USD</option>
                                        <option value="EUR">EUR</option>
                                        <option value="BTC">BTC</option>
                                        <option value="ETH">ETH</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="paymentTerms" class="block text-sm font-medium mb-1">Default Payment Terms</label>
                                    <select id="paymentTerms" class="neubrutal-select rounded-lg px-4 py-3 w-full">
                                        <option value="immediate">Due Immediately</option>
                                        <option value="7days">Net 7</option>
                                        <option value="14days">Net 14</option>
                                        <option value="30days">Net 30</option>
                                    </select>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="text-sm font-medium">Auto-generate Invoice Number</label>
                                        <p class="text-xs text-gray-400">Automatically create sequential invoice numbers</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium mb-3">Security</h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="text-sm font-medium">Two-Factor Authentication</label>
                                        <p class="text-xs text-gray-400">Enable 2FA for extra account security</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <button class="neubrutal-button bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded-lg text-sm">
                                    Change Password
                                </button>
                            </div>
                        </div>
                        
                        <button class="neubrutal-button bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 text-white py-3 px-6 rounded-lg w-full glow-button">
                            Save Settings
                        </button>
                    </div>
                </div>
                
                <div class="neubrutal-card rounded-xl p-6">
                    <h3 class="text-xl font-bold mb-6">Wallet Settings</h3>
                    
                    <div class="space-y-6">
                        <div>
                            <h4 class="font-medium mb-3">Connected Wallets</h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-800 rounded-lg">
                                    <div class="flex items-center">
                                        <div class="bg-blue-600 p-2 rounded-lg mr-3">
                                            <i class="bi bi-wallet2"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium">MetaMask</p>
                                            <p class="text-xs text-gray-400">ETH: 0x36d8...0Ef5</p>
                                        </div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button class="text-red-500 text-sm">
                                            Disconnect
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 bg-gray-800 rounded-lg">
                                    <div class="flex items-center">
                                        <div class="bg-yellow-600 p-2 rounded-lg mr-3">
                                            <i class="bi bi-currency-bitcoin"></i>
                                        </div>
                                        <div>
                                            <p class="font-medium">Bitcoin Wallet</p>
                                            <p class="text-xs text-gray-400">BTC: bc1qxy...zqv9</p>
                                        </div>
                                    </div>
                                    <div class="flex space-x-2">
                                        <button class="text-red-500 text-sm">
                                            Disconnect
                                        </button>
                                    </div>
                                </div>
                                
                                <button id="connectWalletBtn" class="neubrutal-button bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 text-white py-2 px-4 rounded-lg text-sm flex items-center justify-center glow-button">
                                    <i class="bi bi-plus-lg mr-2"></i> Connect New Wallet
                                </button>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium mb-3">Network Preferences</h4>
                            <div class="space-y-3">
                                <div>
                                    <label for="ethNetwork" class="block text-sm font-medium mb-1">Ethereum Network</label>
                                    <select id="ethNetwork" class="neubrutal-select rounded-lg px-4 py-3 w-full">
                                        <option value="mainnet">Ethereum Mainnet</option>
                                        <option value="goerli">Goerli Testnet</option>
                                        <option value="sepolia">Sepolia Testnet</option>
                                    </select>
                                </div>
                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="text-sm font-medium">Prioritize Transaction Speed</label>
                                        <p class="text-xs text-gray-400">Pay higher fees for faster confirmations</p>
                                    </div>
                                    <label class="toggle-switch">
                                        <input type="checkbox" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium mb-3">Invoice Appearance</h4>
                            <div class="space-y-3">
                                <div>
                                    <label for="invoiceTheme" class="block text-sm font-medium mb-1">Invoice Theme</label>
                                    <select id="invoiceTheme" class="neubrutal-select rounded-lg px-4 py-3 w-full">
                                        <option value="standard">Standard</option>
                                        <option value="minimal">Minimal</option>
                                        <option value="professional">Professional</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="businessLogo" class="block text-sm font-medium mb-1">Business Logo</label>
                                    <div class="flex items-center space-x-2">
                                        <div class="bg-gray-700 w-12 h-12 rounded-lg flex items-center justify-center">
                                            <i class="bi bi-image text-2xl"></i>
                                        </div>
                                        <button class="neubrutal-button bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-400 hover:to-purple-400 text-white py-1 px-3 rounded-lg text-sm">
                                            Upload Logo
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button class="neubrutal-button bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-400 hover:to-purple-500 text-white py-3 px-6 rounded-lg w-full glow-button">
                            Save Wallet Settings
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Invoice Details -->
    <div id="invoiceDetailsModal" class="modal">
        <div class="modal-content rounded-xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">Invoice Details</h3>
                <button class="close-modal text-2xl">&times;</button>
            </div>
            
            <div id="modalInvoiceContent" class="bg-white text-gray-900 p-6 rounded-lg">
                <!-- Invoice details will be loaded here -->
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">INVOICE</h2>
                    <p id="modalInvoiceNumber" class="text-gray-600">INV-1234</p>
                </div>
                
                <div class="flex justify-between mb-6">
                    <div>
                        <p class="text-sm text-gray-600">From</p>
                        <p class="font-bold text-gray-900">Your Name / Business</p>
                        <p class="text-sm text-gray-600">0x36d8...0Ef5</p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm text-gray-600">To</p>
                        <p id="modalBuyerInfo" class="font-bold text-gray-900">Client Name</p>
                        <p id="modalDate" class="text-sm text-gray-600">May 15, 2023</p>
                        <p id="modalDueDate" class="text-sm text-gray-600">Due: May 30, 2023</p>
                    </div>
                </div>
                
                <table class="w-full mb-6">
                    <thead>
                        <tr class="border-b border-gray-300">
                            <th class="text-left py-2 text-gray-900">Description</th>
                            <th class="text-right py-2 text-gray-900">Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td id="modalDescription" class="py-3 text-gray-700">Website development services</td>
                            <td id="modalAmount" class="py-3 text-right font-semibold text-gray-900">$350.00</td>
                        </tr>
                        <tr class="border-t border-gray-200">
                            <td class="py-2 text-right text-gray-600">Fee (3%)</td>
                            <td id="modalFee" class="py-2 text-right text-gray-600">$10.50</td>
                        </tr>
                        <tr class="border-t border-gray-300">
                            <td class="py-2 text-right font-semibold text-gray-900">Total</td>
                            <td id="modalTotal" class="py-2 text-right font-bold text-gray-900">$360.50</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div>
                        <p class="text-sm text-gray-600 mb-1">Payment received in</p>
                        <p id="modalPaymentMethod" class="font-medium text-gray-900">Ethereum (ETH)</p>
                        <p id="modalEquivalent" class="text-sm text-gray-600">≈ 0.15 ETH</p>
                    </div>
                    <div id="modalQrCode" class="mt-4 md:mt-0">
                        <!-- QR code will be shown here -->
                    </div>
                </div>
                
                <div class="mt-6 border-t border-gray-200 pt-4">
                    <div class="flex justify-between mb-1">
                        <span class="text-sm text-gray-600">Status</span>
                        <span id="modalStatus" class="text-sm font-medium text-green-600">Paid</span>
                    </div>
                    <div class="flex justify-between mb-1">
                        <span class="text-sm text-gray-600">Transaction ID</span>
                        <span id="modalTransactionId" class="text-sm font-mono">0x1234...5678</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-sm text-gray-600">Timestamp</span>
                        <span id="modalTimestamp" class="text-sm">May 15, 2023, 14:32 UTC</span>
                    </div>
                </div>
            </div>
            
            <div class="mt-6 flex justify-center">
                <button id="downloadModalInvoicePdf" class="neubrutal-button bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white py-2 px-4 rounded-lg flex items-center mr-4 glow-button">
                    <i class="bi bi-file-earmark-pdf mr-2"></i> Download PDF
                </button>
                <button class="neubrutal-button bg-gray-600 hover:bg-gray-500 text-white py-2 px-4 rounded-lg flex items-center close-modal">
                    <i class="bi bi-x-circle mr-2"></i> Close
                </button>
            </div>
        </div>
    </div>

    <!-- Modal for Transaction Details -->
    <div id="transactionDetailsModal" class="modal">
        <div class="modal-content rounded-xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">Transaction Details</h3>
                <button class="close-modal text-2xl">&times;</button>
            </div>
            
            <div class="space-y-4">
                <div class="bg-gray-800 rounded-lg p-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-400">Transaction Type</span>
                        <span id="txType" class="bg-blue-900 text-blue-300 px-2 py-1 rounded-lg text-xs font-semibold">Received</span>
                    </div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-400">Amount</span>
                        <span id="txAmount" class="font-bold">+0.15 ETH</span>
                    </div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-400">USD Equivalent</span>
                        <span id="txUsdEquivalent">$350.00 USD</span>
                    </div>
                </div>
                
                <div class="bg-gray-800 rounded-lg p-4">
                    <h4 class="font-medium mb-3">Transaction Details</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-400">Date & Time</span>
                            <span id="txDateTime">May 15, 2023, 14:32 UTC</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Status</span>
                            <span id="txStatus" class="text-green-400">Completed</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Transaction ID</span>
                            <div class="flex items-center">
                                <span id="txId" class="font-mono">0x1234...5678</span>
                                <button class="ml-2 text-blue-400 copy-to-clipboard" data-copy="0x1234567890abcdef1234567890abcdef12345678">
                                    <i class="bi bi-clipboard"></i>
                                </button>
                            </div>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Network</span>
                            <span id="txNetwork">Ethereum Mainnet</span>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-800 rounded-lg p-4">
                    <h4 class="font-medium mb-3">From / To</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-400">From</span>
                            <div class="flex items-center">
                                <span id="txFrom" class="font-mono">0xa1b2...c3d4</span>
                                <button class="ml-2 text-blue-400 copy-to-clipboard" data-copy="0xa1b2c3d4e5f6a1b2c3d4e5f6a1b2c3d4e5f6a1b2">
                                    <i class="bi bi-clipboard"></i>
                                </button>
                            </div>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">To</span>
                            <div class="flex items-center">
                                <span id="txTo" class="font-mono">0x36d8...0Ef5</span>
                                <button class="ml-2 text-blue-400 copy-to-clipboard" data-copy="0x36d893413F440aA49d8E67324e952Db66e030Ef5">
                                    <i class="bi bi-clipboard"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gray-800 rounded-lg p-4">
                    <h4 class="font-medium mb-3">Fee Information</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-400">Network Fee</span>
                            <span id="txNetworkFee">0.002 ETH</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">Platform Fee (3%)</span>
                            <span id="txPlatformFee">0.0045 ETH</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="font-medium">Total Fee</span>
                            <span id="txTotalFee" class="font-medium">0.0065 ETH</span>
                        </div>
                    </div>
                </div>
                
                <div>
                    <a href="#" id="viewOnExplorer" class="text-blue-400 flex items-center text-sm" target="_blank">
                        <i class="bi bi-box-arrow-up-right mr-1"></i> View on Blockchain Explorer
                    </a>
                </div>
            </div>
            
            <div class="mt-6 flex justify-center">
                <button id="downloadTxReceipt" class="neubrutal-button bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white py-2 px-4 rounded-lg flex items-center mr-4 glow-button">
                    <i class="bi bi-file-earmark-pdf mr-2"></i> Download Receipt
                </button>
                <button class="neubrutal-button bg-gray-600 hover:bg-gray-500 text-white py-2 px-4 rounded-lg flex items-center close-modal">
                    <i class="bi bi-x-circle mr-2"></i> Close
                </button>
            </div>
        </div>
    </div>

    <!-- Payment Success Modal -->
    <div id="paymentSuccessModal" class="modal">
        <div class="modal-content rounded-xl p-6 max-w-md">
            <div class="flex flex-col items-center text-center mb-6">
                <div class="bg-green-600 text-white rounded-full w-16 h-16 flex items-center justify-center mb-4 animate-pulse">
                    <i class="bi bi-check-lg text-3xl"></i>
                </div>
                <h3 class="text-xl font-bold">Payment Successful!</h3>
                <p class="text-gray-400 mt-2">Your payment has been processed successfully.</p>
            </div>
            
            <div class="bg-gray-800 rounded-lg p-4 mb-6">
                <div class="flex justify-between items-center mb-2">
                    <span class="text-gray-400">Amount</span>
                    <span id="successAmount" class="font-bold">0.15 ETH</span>
                </div>
                <div class="flex justify-between items-center mb-2">
                    <span class="text-gray-400">Recipient</span>
                    <span id="successRecipient" class="font-mono text-sm">0xe5f6...g7h8</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-400">Transaction ID</span>
                    <span id="successTxId" class="font-mono text-sm">0x789...abc</span>
                </div>
            </div>
            
            <div class="flex flex-col space-y-3">
                <button id="viewSuccessDetails" class="neubrutal-button bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-400 hover:to-cyan-400 text-white py-2 px-4 rounded-lg glow-button">
                    View Details
                </button>
                <button class="neubrutal-button bg-gray-600 hover:bg-gray-500 text-white py-2 px-4 rounded-lg close-modal">
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- Connect Wallet Modal -->
    <div id="connectWalletModal" class="modal">
        <div class="modal-content rounded-xl p-6 max-w-md">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">Connect Your Wallet</h3>
                <button class="close-modal text-2xl">&times;</button>
            </div>
            
            <div class="space-y-4">
                <button class="w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-between connect-wallet-option">
                    <div class="flex items-center">
                        <img src="https://cdn.worldvectorlogo.com/logos/metamask.svg" alt="MetaMask" class="w-8 h-8 mr-3">
                        <span class="font-medium">MetaMask</span>
                    </div>
                    <i class="bi bi-chevron-right"></i>
                </button>
                
                <button class="w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-between connect-wallet-option">
                    <div class="flex items-center">
                        <img src="https://cryptologos.cc/logos/bitcoin-btc-logo.png" alt="Bitcoin" class="w-8 h-8 mr-3">
                        <span class="font-medium">Bitcoin Wallet</span>
                    </div>
                    <i class="bi bi-chevron-right"></i>
                </button>
                
                <button class="w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-between connect-wallet-option">
                    <div class="flex items-center">
                        <img src="https://cryptologos.cc/logos/polygon-matic-logo.png" alt="Polygon" class="w-8 h-8 mr-3">
                        <span class="font-medium">Polygon Wallet</span>
                    </div>
                    <i class="bi bi-chevron-right"></i>
                </button>
                
                <button class="w-full p-4 bg-gray-800 hover:bg-gray-700 rounded-lg flex items-center justify-between connect-wallet-option">
                    <div class="flex items-center">
                        <img src="https://cryptologos.cc/logos/solana-sol-logo.png" alt="Solana" class="w-8 h-8 mr-3">
                        <span class="font-medium">Solana Wallet</span>
                    </div>
                    <i class="bi bi-chevron-right"></i>
                </button>
            </div>
            
            <div class="mt-6">
                <p class="text-sm text-gray-400 text-center">
                    By connecting a wallet, you agree to FastCrypto's <a href="#" class="text-blue-400">Terms of Service</a> and <a href="#" class="text-blue-400">Privacy Policy</a>.
                </p>
            </div>
        </div>
    </div>

    <!-- Generated Invoice Modal -->
    <div id="generatedInvoiceModal" class="modal">
        <div class="modal-content rounded-xl p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold">Generated Invoice</h3>
                <button class="close-modal text-2xl">&times;</button>
            </div>
            
            <div id="generatedInvoiceContent" class="bg-white text-gray-900 p-6 rounded-lg">
                <!-- Generated invoice will be loaded here (a copy of the invoice preview) -->
            </div>
            
            <div class="mt-6 flex justify-center">
                <button id="downloadGeneratedInvoice" class="neubrutal-button bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white py-2 px-4 rounded-lg flex items-center mr-4 glow-button">
                    <i class="bi bi-file-earmark-pdf mr-2"></i> Download PDF
                </button>
                <button id="shareGeneratedInvoice" class="neubrutal-button bg-gradient-to-r from-green-500 to-teal-500 hover:from-green-400 hover:to-teal-400 text-white py-2 px-4 rounded-lg flex items-center mr-4 glow-button">
                    <i class="bi bi-share mr-2"></i> Share Invoice
                </button>
                <button class="neubrutal-button bg-gray-600 hover:bg-gray-500 text-white py-2 px-4 rounded-lg flex items-center close-modal">
                    <i class="bi bi-x-circle mr-2"></i> Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // Initialize jsPDF
        window.jsPDF = window.jspdf.jsPDF;

        // DOM elements
        const app = document.getElementById('app');
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');
        
        // Initialize tabs
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.getAttribute('data-tab');
                
                // Remove active class from all tabs
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active', 'block'));
                tabContents.forEach(content => content.classList.add('hidden'));
                
                // Add active class to selected tab
                button.classList.add('active');
                document.getElementById(`${tabId}-tab`).classList.remove('hidden');
                document.getElementById(`${tabId}-tab`).classList.add('active', 'block');
            });
        });
        
        // Modal functionality
        const modals = document.querySelectorAll('.modal');
        const closeButtons = document.querySelectorAll('.close-modal');
        
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('show');
        }
        
        function closeModal() {
            modals.forEach(modal => modal.classList.remove('show'));
        }
        
        closeButtons.forEach(button => {
            button.addEventListener('click', closeModal);
        });
        
        modals.forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });
        });
        
        // View invoice details functionality
        const viewInvoiceButtons = document.querySelectorAll('.view-invoice-details');
        
        viewInvoiceButtons.forEach(button => {
            button.addEventListener('click', () => {
                const invoiceId = button.getAttribute('data-invoice');
                
                // In a real application, this would fetch the invoice data from API
                // For now, we'll mock some data
                document.getElementById('modalInvoiceNumber').textContent = invoiceId;
                
                // Generate a QR code for the modal
                const modalQrContainer = document.getElementById('modalQrCode');
                modalQrContainer.innerHTML = '';
                new QRCode(modalQrContainer, {
                    text: `FastCryptoPay:invoice:${invoiceId}`,
                    width: 100,
                    height: 100,
                    colorDark: "#000000",
                    colorLight: "#ffffff"
                });
                
                // Set status colors based on invoice ID
                if (invoiceId === "INV-1234") {
                    document.getElementById('modalStatus').textContent = "Paid";
                    document.getElementById('modalStatus').className = "text-sm font-medium text-green-600";
                } else if (invoiceId === "INV-1235") {
                    document.getElementById('modalStatus').textContent = "Pending";
                    document.getElementById('modalStatus').className = "text-sm font-medium text-yellow-600";
                } else {
                    document.getElementById('modalStatus').textContent = "Cancelled";
                    document.getElementById('modalStatus').className = "text-sm font-medium text-red-600";
                }
                
                // Set other mock data fields
                document.getElementById('modalDescription').textContent = "Website development services";
                document.getElementById('modalAmount').textContent = "$350.00";
                document.getElementById('modalFee').textContent = "$10.50";
                document.getElementById('modalTotal').textContent = "$360.50";
                document.getElementById('modalTransactionId').textContent = "0x1234...5678";
                document.getElementById('modalTimestamp').textContent = "May 15, 2023, 14:32 UTC";
                
                // Open the modal
                openModal('invoiceDetailsModal');
            });
        });
        
        // View transaction details functionality
        const viewTransactionButtons = document.querySelectorAll('.view-transaction');
        
        viewTransactionButtons.forEach(button => {
            button.addEventListener('click', () => {
                const txId = button.getAttribute('data-tx');
                
                // In a real application, this would fetch the transaction data from API
                // For now, we'll mock some data
                document.getElementById('txId').textContent = `${txId}...abcd`;
                
                // Set transaction details based on the TX ID
                if (txId === "0x123") {
                    document.getElementById('txType').textContent = "Received";
                    document.getElementById('txType').className = "bg-blue-900 text-blue-300 px-2 py-1 rounded-lg text-xs font-semibold";
                    document.getElementById('txAmount').textContent = "+0.15 ETH";
                    document.getElementById('txUsdEquivalent').textContent = "$350.00 USD";
                } else if (txId === "0x456") {
                    document.getElementById('txType').textContent = "Sent";
                    document.getElementById('txType').className = "bg-orange-900 text-orange-300 px-2 py-1 rounded-lg text-xs font-semibold";
                    document.getElementById('txAmount').textContent = "-0.005 BTC";
                    document.getElementById('txUsdEquivalent').textContent = "$125.50 USD";
                } else {
                    document.getElementById('txType').textContent = "Received";
                    document.getElementById('txType').className = "bg-blue-900 text-blue-300 px-2 py-1 rounded-lg text-xs font-semibold";
                    document.getElementById('txAmount').textContent = "+100 USDT";
                    document.getElementById('txUsdEquivalent').textContent = "$100.00 USD";
                }
                
                // Open the modal
                openModal('transactionDetailsModal');
            });
        });

        // Copy to clipboard functionality
        document.querySelectorAll('.copy-to-clipboard').forEach(button => {
            button.addEventListener('click', () => {
                const textToCopy = button.getAttribute('data-copy');
                navigator.clipboard.writeText(textToCopy).then(() => {
                    const originalIcon = button.innerHTML;
                    button.innerHTML = '<i class="bi bi-check"></i>';
                    setTimeout(() => {
                        button.innerHTML = originalIcon;
                    }, 2000);
                });
            });
        });
        
        // Create activity chart
        const activityChartCtx = document.getElementById('activityChart').getContext('2d');
        const activityChart = new Chart(activityChartCtx, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Transaction Volume',
                    data: [500, 700, 550, 1200, 800, 650, 900],
                    borderColor: '#00d2ff',
                    backgroundColor: 'rgba(0, 210, 255, 0.1)',
                    tension: 0.3,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)'
                        },
                        ticks: {
                            color: 'rgba(255, 255, 255, 0.7)'
                        }
                    },
                    y: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.05)'
                        },
                        ticks: {
                            color: 'rgba(255, 255, 255, 0.7)'
                        }
                    }
                }
            }
        });
        
        // Create Invoice functionality
        const invoiceForm = document.getElementById('invoiceForm');
        const invoiceAmount = document.getElementById('invoiceAmount');
        const invoiceCurrency = document.getElementById('invoiceCurrency');
        const invoiceDescription = document.getElementById('invoiceDescription');
        const paymentMethod = document.getElementById('paymentMethod');
        const buyerInfo = document.getElementById('buyerInfo');
        const dueDate = document.getElementById('dueDate');
        
        const subtotalAmount = document.getElementById('subtotalAmount');
        const feeAmount = document.getElementById('feeAmount');
        const totalAmount = document.getElementById('totalAmount');
        
        // Preview elements
        const previewInvoiceNumber = document.getElementById('previewInvoiceNumber');
        const previewBuyerInfo = document.getElementById('previewBuyerInfo');
        const previewDescription = document.getElementById('previewDescription');
        const previewDate = document.getElementById('previewDate');
        const previewDueDate = document.getElementById('previewDueDate');
        const previewAmount = document.getElementById('previewAmount');
        const previewFee = document.getElementById('previewFee');
        const previewTotal = document.getElementById('previewTotal');
        const previewPaymentMethod = document.getElementById('previewPaymentMethod');
        const previewEquivalent = document.getElementById('previewEquivalent');
        const previewQrCode = document.getElementById('previewQrCode');
        const previewTimestamp = document.getElementById('previewTimestamp');
        const previewFeePercentage = document.getElementById('previewFeePercentage');
        
        // Function to calculate fees
        function calculateFee(amount) {
            if (amount >= 1000) {
                return amount * 0.02; // 2% for transactions over $1,000
            } else if (amount >= 100) {
                return amount * 0.03; // 3% for transactions $100-$1,000
            } else {
                return amount * 0.05; // 5% for transactions under $100
            }
        }

        // Function to get fee percentage based on amount
        function getFeePercentage(amount) {
            if (amount >= 1000) {
                return 2; // 2% for transactions over $1,000
            } else if (amount >= 100) {
                return 3; // 3% for transactions $100-$1,000
            } else {
                return 5; // 5% for transactions under $100
            }
        }
        
        // Function to format currency
        function formatCurrency(amount, currency = 'USD') {
            if (currency === 'USD' || currency === 'EUR' || currency === 'GBP') {
                const symbols = {
                    'USD': '$',
                    'EUR': '€',
                    'GBP': '£'
                };
                return `${symbols[currency]}${amount.toFixed(2)}`;
            } else {
                return `${amount.toFixed(6)} ${currency}`;
            }
        }
        
        // Update calculation when amount or currency changes
        function updateInvoiceCalculations() {
            const amount = parseFloat(invoiceAmount.value) || 0;
            const currency = invoiceCurrency.value;
            
            const feePercentage = getFeePercentage(amount);
            const fee = calculateFee(amount);
            const total = amount + fee;
            
            subtotalAmount.textContent = formatCurrency(amount, currency);
            feeAmount.textContent = formatCurrency(fee, currency);
            totalAmount.textContent = formatCurrency(total, currency);
            
            // Update preview
            previewDescription.textContent = invoiceDescription.value || 'Service description will appear here';
            previewAmount.textContent = formatCurrency(amount, currency);
            previewFee.textContent = formatCurrency(fee, currency);
            previewTotal.textContent = formatCurrency(total, currency);
            previewFeePercentage.textContent = feePercentage;
            
            let cryptoRate;
            if (currency === 'BTC') {
                cryptoRate = 1;
            } else if (currency === 'ETH') {
                cryptoRate = 1;
            } else {
                // Mock exchange rates for fiat to crypto
                if (paymentMethod.value === 'BTC') {
                    cryptoRate = 36000; // Mocked BTC price in USD
                } else if (paymentMethod.value === 'ETH') {
                    cryptoRate = 2500; // Mocked ETH price in USD
                } else if (paymentMethod.value === 'SOL') {
                    cryptoRate = 100; // Mocked SOL price in USD
                } else {
                    cryptoRate = 1; // USDT 1:1 with USD
                }
            }
            
            let cryptoAmount;
            if (currency === paymentMethod.value) {
                cryptoAmount = total; // Same currency, no conversion
            } else {
                cryptoAmount = total / cryptoRate; // Simple conversion
            }
            
            const selectedCrypto = paymentMethod.value;
            
            previewPaymentMethod.textContent = {
                'BTC': 'Bitcoin (BTC)',
                'ETH': 'Ethereum (ETH)',
                'USDT': 'Tether (USDT)',
                'SOL': 'Solana (SOL)'
            }[selectedCrypto];
            
            previewEquivalent.textContent = `≈ ${cryptoAmount.toFixed(6)} ${selectedCrypto}`;
            
            // Update buyer info
            previewBuyerInfo.textContent = buyerInfo.value || 'Client Name';
            
            // Update dates
            const today = new Date();
            previewDate.textContent = today.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
            previewTimestamp.textContent = `Generated: ${today.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}, ${today.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })} UTC`;
            
            if (dueDate.value) {
                const dueDateObj = new Date(dueDate.value);
                previewDueDate.textContent = `Due: ${dueDateObj.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}`;
            } else {
                previewDueDate.textContent = 'Due: Immediately';
            }
        }
        
        invoiceAmount.addEventListener('input', updateInvoiceCalculations);
        invoiceCurrency.addEventListener('change', updateInvoiceCalculations);
        invoiceDescription.addEventListener('input', updateInvoiceCalculations);
        paymentMethod.addEventListener('change', updateInvoiceCalculations);
        buyerInfo.addEventListener('input', updateInvoiceCalculations);
        dueDate.addEventListener('change', updateInvoiceCalculations);
        
        // Initialize calculations
        updateInvoiceCalculations();
        
        // Generate QR code for preview
        document.getElementById('previewInvoice').addEventListener('click', () => {
            // Generate QR code
            const qrContainer = document.getElementById('previewQrCode');
            qrContainer.innerHTML = '';
            
            const invoiceData = {
                amount: invoiceAmount.value,
                currency: invoiceCurrency.value,
                paymentMethod: paymentMethod.value,
                description: invoiceDescription.value || 'Service payment',
                buyer: buyerInfo.value || 'Client'
            };
            
            new QRCode(qrContainer, {
                text: JSON.stringify(invoiceData),
                width: 100,
                height: 100,
                colorDark: "#000000",
                colorLight: "#ffffff"
            });
        });
        
        // Generate invoice
        invoiceForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Show loading state
            const generateBtn = document.getElementById('generateInvoice');
            const originalBtnText = generateBtn.innerHTML;
            generateBtn.innerHTML = '<div class="loader mx-auto" style="width:20px;height:20px;"></div>';
            generateBtn.disabled = true;
            
            // Simulate API call to generate invoice
            setTimeout(() => {
                // Restore button
                generateBtn.innerHTML = originalBtnText;
                generateBtn.disabled = false;
                
                // Generate invoice number
                const invoiceNumber = `INV-${Math.floor(1000 + Math.random() * 9000)}`;
                previewInvoiceNumber.textContent = invoiceNumber;
                
                // Generate QR code
                const qrContainer = document.getElementById('previewQrCode');
                qrContainer.innerHTML = '';
                
                const invoiceData = {
                    invoiceNumber: invoiceNumber,
                    amount: invoiceAmount.value,
                    currency: invoiceCurrency.value,
                    paymentMethod: paymentMethod.value,
                    description: invoiceDescription.value || 'Service payment',
                    buyer: buyerInfo.value || 'Client',
                    date: new Date().toISOString()
                };
                
                new QRCode(qrContainer, {
                    text: JSON.stringify(invoiceData),
                    width: 100,
                    height: 100,
                    colorDark: "#000000",
                    colorLight: "#ffffff"
                });
                
                // Clone the invoice preview for the generated invoice modal
                const generatedInvoiceContent = document.getElementById('generatedInvoiceContent');
                generatedInvoiceContent.innerHTML = document.getElementById('invoicePreview').innerHTML;
                
                // Open the generated invoice modal
                openModal('generatedInvoiceModal');
            }, 1500);
        });
        
        // Download PDF functionality
        document.getElementById('downloadInvoicePdf').addEventListener('click', function() {
            const invoiceElement = document.getElementById('invoicePreview');
            generatePDF(invoiceElement, 'FastCrypto_Invoice');
        });
        
        document.getElementById('downloadGeneratedInvoice').addEventListener('click', function() {
            const invoiceElement = document.getElementById('generatedInvoiceContent');
            generatePDF(invoiceElement, 'FastCrypto_Invoice_Generated');
        });
        
        document.getElementById('downloadModalInvoicePdf').addEventListener('click', function() {
            const invoiceElement = document.getElementById('modalInvoiceContent');
            generatePDF(invoiceElement, 'FastCrypto_Invoice_Details');
        });
        
        document.getElementById('downloadTxReceipt').addEventListener('click', function() {
            alert('Transaction receipt would be downloaded as PDF in a production environment');
        });
        
        // Function to generate PDF
        function generatePDF(element, filename) {
            // Show a loading notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-lg z-50';
            notification.innerHTML = 'Generating PDF...';
            document.body.appendChild(notification);
            
            // Use html2canvas to capture the invoice as an image
            html2canvas(element, {
                scale: 2,
                useCORS: true,
                logging: false
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const imgWidth = 210; // A4 width in mm
                const imgHeight = canvas.height * imgWidth / canvas.width;
                
                pdf.addImage(imgData, 'PNG', 0, 0, imgWidth, imgHeight);
                pdf.save(`${filename}.pdf`);
                
                // Remove loading notification
                document.body.removeChild(notification);
                
                // Show success notification
                const successNotification = document.createElement('div');
                successNotification.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg z-50';
                successNotification.innerHTML = 'PDF Downloaded Successfully!';
                document.body.appendChild(successNotification);
                
                // Remove success notification after 3 seconds
                setTimeout(() => {
                    document.body.removeChild(successNotification);
                }, 3000);
            });
        }
        
        // Share invoice functionality
        document.getElementById('shareGeneratedInvoice').addEventListener('click', function() {
            if (navigator.share) {
                navigator.share({
                    title: 'FastCrypto Invoice',
                    text: 'Here is your invoice from FastCrypto Pay.',
                    url: window.location.href
                })
                .catch(error => {
                    console.error('Error sharing:', error);
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                const dummyInput = document.createElement('input');
                document.body.appendChild(dummyInput);
                dummyInput.value = window.location.href;
                dummyInput.select();
                document.execCommand('copy');
                document.body.removeChild(dummyInput);
                
                alert('URL copied to clipboard. You can share it manually.');
            }
        });
        
        // Quick Pay functionality
        const quickPayForm = document.getElementById('quickPayForm');
        const quickPayAmount = document.getElementById('quickPayAmount');
        const quickPayCurrency = document.getElementById('quickPayCurrency');
        
        quickPayForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Show loading state
            const sendBtn = document.getElementById('sendPayment');
            const originalBtnText = sendBtn.innerHTML;
            sendBtn.innerHTML = '<div class="loader mx-auto" style="width:20px;height:20px;"></div>';
            sendBtn.disabled = true;
            
            // Simulate API call to process payment
            setTimeout(() => {
                // Restore button
                sendBtn.innerHTML = originalBtnText;
                sendBtn.disabled = false;
                
                // Show success modal
                document.getElementById('successAmount').textContent = `${quickPayAmount.value} ${quickPayCurrency.value}`;
                document.getElementById('successRecipient').textContent = document.getElementById('recipientAddress').value;
                document.getElementById('successTxId').textContent = `0x${Math.random().toString(16).slice(2, 10)}...${Math.random().toString(16).slice(2, 5)}`;
                
                openModal('paymentSuccessModal');
            }, 2000);
        });
        
        // Quick Pay QR code generation
        function updateQuickPayQR() {
            const amount = quickPayAmount.value;
            const currency = quickPayCurrency.value;
            const address = document.getElementById('recipientAddress').value;
            
            if (amount && address) {
                const qrContainer = document.getElementById('quickPayQrCode');
                qrContainer.innerHTML = '';
                
                const paymentData = {
                    amount: amount,
                    currency: currency,
                    address: address,
                    note: document.getElementById('quickPayNote').value,
                    timestamp: new Date().toISOString()
                };
                
                new QRCode(qrContainer, {
                    text: JSON.stringify(paymentData),
                    width: 150,
                    height: 150,
                    colorDark: "#000000",
                    colorLight: "#ffffff"
                });
                
                document.getElementById('quickPayQrDetails').classList.remove('hidden');
                document.getElementById('qrAmount').textContent = amount;
                document.getElementById('qrCurrency').textContent = currency;
                document.getElementById('qrAddress').textContent = address.substring(0, 6) + '...' + address.substring(address.length - 4);
            }
        }
        
        quickPayAmount.addEventListener('input', updateQuickPayQR);
        quickPayCurrency.addEventListener('change', updateQuickPayQR);
        document.getElementById('recipientAddress').addEventListener('input', updateQuickPayQR);
        document.getElementById('quickPayNote').addEventListener('input', updateQuickPayQR);
        
        // Quick Pay fee calculation
        function updateQuickPayFees() {
            const amount = parseFloat(quickPayAmount.value) || 0;
            const networkFee = amount * 0.01; // 1% network fee
            const total = amount + networkFee;
            
            document.getElementById('qpAmount').textContent = formatCurrency(amount, quickPayCurrency.value);
            document.getElementById('qpNetworkFee').textContent = formatCurrency(networkFee, quickPayCurrency.value);
            document.getElementById('qpTotal').textContent = formatCurrency(total, quickPayCurrency.value);
        }
        
        quickPayAmount.addEventListener('input', updateQuickPayFees);
        quickPayCurrency.addEventListener('change', updateQuickPayFees);
        
        // Initialize Quick Pay fees
        updateQuickPayFees();
        
        // Fetch real-time crypto prices
        async function fetchCryptoPrices() {
            try {
                // Show loading status in price elements
                document.getElementById('btcPrice').innerHTML = '<span class="loading">Loading...</span>';
                document.getElementById('ethPrice').innerHTML = '<span class="loading">Loading...</span>';
                
                // In a real application, you would fetch from a crypto price API
                // For demo purposes, we'll use the Moralis endpoint from the schema
                const ethResponse = await fetch('https://r0c8kgwocscg8gsokogwwsw4.zetaverse.one/moralis/0x36d893413F440aA49d8E67324e952Db66e030Ef5/balance?chain=eth', {
                    headers: {
                        Authorization: 'Bearer EqGdJJuAtRcJO0dm7mkff6PLoBm1'
                    }
                });
                
                if (ethResponse.ok) {
                    // For demo purposes, we'll simulate both BTC and ETH prices
                    const btcPrice = 42350 + (Math.random() * 1000 - 500);
                    const ethPrice = 2750 + (Math.random() * 100 - 50);
                    
                    document.getElementById('btcPrice').innerHTML = `$${btcPrice.toFixed(2)}`;
                    document.getElementById('ethPrice').innerHTML = `$${ethPrice.toFixed(2)}`;
                    
                    // Update conversion rates
                    document.getElementById('btcConversionRate').textContent = `$${btcPrice.toFixed(2)} USD`;
                    document.getElementById('ethConversionRate').textContent = `$${ethPrice.toFixed(2)} USD`;
                    document.getElementById('btcConversionRate').classList.remove('converting-animation');
                    document.getElementById('ethConversionRate').classList.remove('converting-animation');
                } else {
                    throw new Error('Failed to fetch data');
                }
            } catch (error) {
                console.error('Error fetching crypto prices:', error);
                
                // Use fallback values
                document.getElementById('btcPrice').textContent = '$42,350.25';
                document.getElementById('ethPrice').textContent = '$2,750.50';
                
                // Update conversion rates with fallback values
                document.getElementById('btcConversionRate').textContent = '$42,350.25 USD';
                document.getElementById('ethConversionRate').textContent = '$2,750.50 USD';
                document.getElementById('btcConversionRate').classList.remove('converting-animation');
                document.getElementById('ethConversionRate').classList.remove('converting-animation');
            }
        }
        
        // Fetch prices initially and then every 60 seconds
        fetchCryptoPrices();
        setInterval(fetchCryptoPrices, 60000);
        
        // Wallet connection functionality
        document.getElementById('addWalletBtn').addEventListener('click', function() {
            openModal('connectWalletModal');
        });
        
        document.getElementById('connectWalletBtn').addEventListener('click', function() {
            openModal('connectWalletModal');
        });
        
        // Process wallet connection
        document.querySelectorAll('.connect-wallet-option').forEach(button => {
            button.addEventListener('click', function() {
                // Close the modal
                closeModal();
                
                // Show loading notification
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-lg z-50 flex items-center';
                notification.innerHTML = '<div class="loader mr-2" style="width:16px;height:16px;"></div> Connecting wallet...';
                document.body.appendChild(notification);
                
                // Simulate wallet connection process
                setTimeout(() => {
                    document.body.removeChild(notification);
                    
                    // Show success notification
                    const successNotification = document.createElement('div');
                    successNotification.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg z-50 flex items-center';
                    successNotification.innerHTML = '<i class="bi bi-check-circle mr-2"></i> Wallet connected successfully!';
                    document.body.appendChild(successNotification);
                    
                    // Remove success notification after 3 seconds
                    setTimeout(() => {
                        document.body.removeChild(successNotification);
                    }, 3000);
                }, 2000);
            });
        });
        
        // View transaction details
        document.getElementById('viewSuccessDetails').addEventListener('click', () => {
            closeModal();
            // Set mock transaction data
            document.getElementById('txType').textContent = "Sent";
            document.getElementById('txType').className = "bg-orange-900 text-orange-300 px-2 py-1 rounded-lg text-xs font-semibold";
            document.getElementById('txAmount').textContent = document.getElementById('successAmount').textContent;
            document.getElementById('txTo').textContent = document.getElementById('successRecipient').textContent;
            document.getElementById('txId').textContent = document.getElementById('successTxId').textContent;
            document.getElementById('txDateTime').textContent = new Date().toLocaleString('en-US', { 
                month: 'short', 
                day: 'numeric', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            }) + ' UTC';
            
            openModal('transactionDetailsModal');
        });
        
        // Scan QR code button
        document.getElementById('scanQrBtn').addEventListener('click', () => {
            // Show loading notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-lg z-50 flex items-center';
            notification.innerHTML = '<div class="loader mr-2" style="width:16px;height:16px;"></div> Scanning QR code...';
            document.body.appendChild(notification);
            
            // Mock a successful scan
            setTimeout(() => {
                document.body.removeChild(notification);
                
                // Update the recipient address
                document.getElementById('recipientAddress').value = '0xe5f6g7h8i9j0k1l2m3n4o5p6';
                updateQuickPayQR();
                
                // Show success notification
                const successNotification = document.createElement('div');
                successNotification.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg z-50 flex items-center';
                successNotification.innerHTML = '<i class="bi bi-check-circle mr-2"></i> QR code scanned successfully!';
                document.body.appendChild(successNotification);
                
                // Remove success notification after 3 seconds
                setTimeout(() => {
                    document.body.removeChild(successNotification);
                }, 3000);
            }, 1500);
        });

        // Refresh balance button
        document.getElementById('refreshBalance').addEventListener('click', function() {
            // Show loading notification
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 bg-blue-600 text-white px-4 py-2 rounded-lg z-50 flex items-center';
            notification.innerHTML = '<div class="loader mr-2" style="width:16px;height:16px;"></div> Refreshing balance...';
            document.body.appendChild(notification);
            
            // Simulate refresh
            setTimeout(() => {
                document.body.removeChild(notification);
                
                // Show success notification
                const successNotification = document.createElement('div');
                successNotification.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg z-50 flex items-center';
                successNotification.innerHTML = '<i class="bi bi-check-circle mr-2"></i> Balance updated!';
                document.body.appendChild(successNotification);
                
                // Remove success notification after 3 seconds
                setTimeout(() => {
                    document.body.removeChild(successNotification);
                }, 3000);
            }, 1500);
        });
        
        // Initialize mock data
        function initializeMockData() {
            // Set random invoice numbers
            const randomInvoiceNum = Math.floor(1000 + Math.random() * 9000);
            document.querySelectorAll('[id^="previewInvoiceNumber"]').forEach(el => {
                el.textContent = `INV-${randomInvoiceNum}`;
            });
            
            // Set today's date
            const today = new Date();
            document.querySelectorAll('[id^="previewDate"]').forEach(el => {
                el.textContent = today.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
            });
            
            // Set timestamps
            const timestamp = `${today.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}, ${today.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })} UTC`;
            document.querySelectorAll('[id^="previewTimestamp"]').forEach(el => {
                el.textContent = `Generated: ${timestamp}`;
            });
        }
        
        // Initialize mock data
        initializeMockData();
        
        // Make the dashboard tab active by default
        document.querySelector('.tab-button[data-tab="dashboard"]').click();
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>